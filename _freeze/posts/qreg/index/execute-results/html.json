{
  "hash": "d2b563b47772aebe57b2143ec265ba3d",
  "result": {
    "markdown": "---\ntitle: \"Quantile Regression\"\nsubtitle: \"Regression without the typical assumptions\"\ntitle-block-banner: ../../images/banner.png\ntitle-block-banner-color: 'white'\nimage: \"qreg.webp\"\ncategories: [\"Math\", \"Statistics\"]\nformat:\n  html:\n    code-fold: true\n    code-summary: \"Show the code\"\n---\n\n  \n\n# A recap on simple linear Regression\n\nGiven data with the following assumptions:\n\n- Linear Relation: the true regression relation between $Y$ and $X$ is linear.\n\n- Normal Errors: the error terms $\\epsilon_i$ are normally distributed with a mean of zero.\n\n- Constant Variance: the variance $\\sigma^2$ of the error terms is constant over all $X_i$ values.\n\n- Fixed $X$: the $X_i$ values can be considered fixed and measured without error.\n\n- Independent Errors: the error terms $\\epsilon_i$,are independent.\n\nWe can model the data with the following equation: \n\n$$\n\\mathbb{E}[Y_i​∣X_i]=\\beta_0​+\\beta_1​X_i​\n$$\n\nThe interpretation of thse slope in this model is increase in the average or expected value of $Y$ given a unit change in $X$.\n\nThe problem with this is that this is limited. \n\n# Quantile Regression\n\n$$\n\\mathbb{Q}_{\\tau}[Y_i∣X_i]=\\beta_0+\\beta_1X_i\n$$\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(mosaic)\nlibrary(gridExtra)\nlibrary(plotly)\n```\n:::\n\n```{=html}\n<br><br>\n```\n\n::: {.cell}\n\n```{.r .cell-code}\nfig1 = Utilities %>% \n  head(15) %>% \n  ggplot(aes(x = kwh, y= elecbill)) +\n  geom_point(size=5, alpha=.4) +\n  geom_smooth(method=\"lm\", se=F, linewidth=2, color=\"black\") +\n  # geom_quantile(quantiles = 0.5, linewidth=2, color=\"purple\") +\n  theme_classic() +\n  labs(title=\"Without Outlier\")+\n  coord_cartesian(ylim=c(0,100), xlim=c(0,1650))\n\nfig2 = Utilities %>% \n  head(15) %>% \n  bind_rows(data.frame(kwh=1600, elecbill=0)) %>% \n  ggplot(aes(x = kwh, y= elecbill)) +\n  geom_point(size=5, alpha=.4) +\n  geom_smooth(method=\"lm\", se=F, linewidth=2, color=\"black\") +\n  # geom_quantile(quantiles = 0.5, linewidth=2, color=\"purple\") +\n  theme_classic()+\n  labs(title=\"With Outlier\")+\n  coord_cartesian(ylim=c(0,100), xlim=c(0,1650))\n\nsubplot(fig1 %>% ggplotly, fig2 %>% ggplotly) %>% \n  layout(title = 'Regression Estimating the Mean Y')\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-29839537eeef97a0a308\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-29839537eeef97a0a308\">{\"x\":{\"data\":[{\"x\":[892,533,521,554,638,700,583,935,789,864,778,617,586,160,736],\"y\":[68.25,43.3,42.83,45.95,53,63.45,59.75,94.36,78.81,83.47,66.31,47.61,46.59,17.43,79.57],\"text\":[\"kwh: 892<br />elecbill: 68.25\",\"kwh: 533<br />elecbill: 43.30\",\"kwh: 521<br />elecbill: 42.83\",\"kwh: 554<br />elecbill: 45.95\",\"kwh: 638<br />elecbill: 53.00\",\"kwh: 700<br />elecbill: 63.45\",\"kwh: 583<br />elecbill: 59.75\",\"kwh: 935<br />elecbill: 94.36\",\"kwh: 789<br />elecbill: 78.81\",\"kwh: 864<br />elecbill: 83.47\",\"kwh: 778<br />elecbill: 66.31\",\"kwh: 617<br />elecbill: 47.61\",\"kwh: 586<br />elecbill: 46.59\",\"kwh: 160<br />elecbill: 17.43\",\"kwh: 736<br />elecbill: 79.57\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,0,1)\",\"opacity\":0.4,\"size\":18.8976377952756,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[160,169.810126582278,179.620253164557,189.430379746835,199.240506329114,209.050632911392,218.860759493671,228.670886075949,238.481012658228,248.291139240506,258.101265822785,267.911392405063,277.721518987342,287.53164556962,297.341772151899,307.151898734177,316.962025316456,326.772151898734,336.582278481013,346.392405063291,356.20253164557,366.012658227848,375.822784810127,385.632911392405,395.443037974684,405.253164556962,415.063291139241,424.873417721519,434.683544303797,444.493670886076,454.303797468354,464.113924050633,473.924050632911,483.73417721519,493.544303797468,503.354430379747,513.164556962025,522.974683544304,532.784810126582,542.594936708861,552.405063291139,562.215189873418,572.025316455696,581.835443037975,591.645569620253,601.455696202532,611.26582278481,621.075949367089,630.886075949367,640.696202531646,650.506329113924,660.316455696203,670.126582278481,679.936708860759,689.746835443038,699.556962025316,709.367088607595,719.177215189873,728.987341772152,738.79746835443,748.607594936709,758.417721518987,768.227848101266,778.037974683544,787.848101265823,797.658227848101,807.46835443038,817.278481012658,827.088607594937,836.898734177215,846.708860759494,856.518987341772,866.329113924051,876.139240506329,885.949367088608,895.759493670886,905.569620253165,915.379746835443,925.189873417722,935],\"y\":[11.415675427858,12.3584813629049,13.3012872979518,14.2440932329988,15.1868991680457,16.1297051030927,17.0725110381396,18.0153169731866,18.9581229082335,19.9009288432804,20.8437347783274,21.7865407133743,22.7293466484213,23.6721525834682,24.6149585185151,25.5577644535621,26.500570388609,27.443376323656,28.3861822587029,29.3289881937499,30.2717941287968,31.2146000638437,32.1574059988907,33.1002119339376,34.0430178689846,34.9858238040315,35.9286297390784,36.8714356741254,37.8142416091723,38.7570475442193,39.6998534792662,40.6426594143132,41.5854653493601,42.528271284407,43.471077219454,44.4138831545009,45.3566890895479,46.2994950245948,47.2423009596418,48.1851068946887,49.1279128297356,50.0707187647826,51.0135246998295,51.9563306348765,52.8991365699234,53.8419425049703,54.7847484400173,55.7275543750642,56.6703603101112,57.6131662451581,58.555972180205,59.498778115252,60.4415840502989,61.3843899853459,62.3271959203928,63.2700018554398,64.2128077904867,65.1556137255336,66.0984196605806,67.0412255956275,67.9840315306745,68.9268374657214,69.8696434007684,70.8124493358153,71.7552552708622,72.6980612059092,73.6408671409561,74.5836730760031,75.52647901105,76.4692849460969,77.4120908811439,78.3548968161908,79.2977027512378,80.2405086862847,81.1833146213317,82.1261205563786,83.0689264914255,84.0117324264725,84.9545383615194,85.8973442965664],\"text\":[\"kwh: 160.0000<br />elecbill: 11.41568\",\"kwh: 169.8101<br />elecbill: 12.35848\",\"kwh: 179.6203<br />elecbill: 13.30129\",\"kwh: 189.4304<br />elecbill: 14.24409\",\"kwh: 199.2405<br />elecbill: 15.18690\",\"kwh: 209.0506<br />elecbill: 16.12971\",\"kwh: 218.8608<br />elecbill: 17.07251\",\"kwh: 228.6709<br />elecbill: 18.01532\",\"kwh: 238.4810<br />elecbill: 18.95812\",\"kwh: 248.2911<br />elecbill: 19.90093\",\"kwh: 258.1013<br />elecbill: 20.84373\",\"kwh: 267.9114<br />elecbill: 21.78654\",\"kwh: 277.7215<br />elecbill: 22.72935\",\"kwh: 287.5316<br />elecbill: 23.67215\",\"kwh: 297.3418<br />elecbill: 24.61496\",\"kwh: 307.1519<br />elecbill: 25.55776\",\"kwh: 316.9620<br />elecbill: 26.50057\",\"kwh: 326.7722<br />elecbill: 27.44338\",\"kwh: 336.5823<br />elecbill: 28.38618\",\"kwh: 346.3924<br />elecbill: 29.32899\",\"kwh: 356.2025<br />elecbill: 30.27179\",\"kwh: 366.0127<br />elecbill: 31.21460\",\"kwh: 375.8228<br />elecbill: 32.15741\",\"kwh: 385.6329<br />elecbill: 33.10021\",\"kwh: 395.4430<br />elecbill: 34.04302\",\"kwh: 405.2532<br />elecbill: 34.98582\",\"kwh: 415.0633<br />elecbill: 35.92863\",\"kwh: 424.8734<br />elecbill: 36.87144\",\"kwh: 434.6835<br />elecbill: 37.81424\",\"kwh: 444.4937<br />elecbill: 38.75705\",\"kwh: 454.3038<br />elecbill: 39.69985\",\"kwh: 464.1139<br />elecbill: 40.64266\",\"kwh: 473.9241<br />elecbill: 41.58547\",\"kwh: 483.7342<br />elecbill: 42.52827\",\"kwh: 493.5443<br />elecbill: 43.47108\",\"kwh: 503.3544<br />elecbill: 44.41388\",\"kwh: 513.1646<br />elecbill: 45.35669\",\"kwh: 522.9747<br />elecbill: 46.29950\",\"kwh: 532.7848<br />elecbill: 47.24230\",\"kwh: 542.5949<br />elecbill: 48.18511\",\"kwh: 552.4051<br />elecbill: 49.12791\",\"kwh: 562.2152<br />elecbill: 50.07072\",\"kwh: 572.0253<br />elecbill: 51.01352\",\"kwh: 581.8354<br />elecbill: 51.95633\",\"kwh: 591.6456<br />elecbill: 52.89914\",\"kwh: 601.4557<br />elecbill: 53.84194\",\"kwh: 611.2658<br />elecbill: 54.78475\",\"kwh: 621.0759<br />elecbill: 55.72755\",\"kwh: 630.8861<br />elecbill: 56.67036\",\"kwh: 640.6962<br />elecbill: 57.61317\",\"kwh: 650.5063<br />elecbill: 58.55597\",\"kwh: 660.3165<br />elecbill: 59.49878\",\"kwh: 670.1266<br />elecbill: 60.44158\",\"kwh: 679.9367<br />elecbill: 61.38439\",\"kwh: 689.7468<br />elecbill: 62.32720\",\"kwh: 699.5570<br />elecbill: 63.27000\",\"kwh: 709.3671<br />elecbill: 64.21281\",\"kwh: 719.1772<br />elecbill: 65.15561\",\"kwh: 728.9873<br />elecbill: 66.09842\",\"kwh: 738.7975<br />elecbill: 67.04123\",\"kwh: 748.6076<br />elecbill: 67.98403\",\"kwh: 758.4177<br />elecbill: 68.92684\",\"kwh: 768.2278<br />elecbill: 69.86964\",\"kwh: 778.0380<br />elecbill: 70.81245\",\"kwh: 787.8481<br />elecbill: 71.75526\",\"kwh: 797.6582<br />elecbill: 72.69806\",\"kwh: 807.4684<br />elecbill: 73.64087\",\"kwh: 817.2785<br />elecbill: 74.58367\",\"kwh: 827.0886<br />elecbill: 75.52648\",\"kwh: 836.8987<br />elecbill: 76.46928\",\"kwh: 846.7089<br />elecbill: 77.41209\",\"kwh: 856.5190<br />elecbill: 78.35490\",\"kwh: 866.3291<br />elecbill: 79.29770\",\"kwh: 876.1392<br />elecbill: 80.24051\",\"kwh: 885.9494<br />elecbill: 81.18331\",\"kwh: 895.7595<br />elecbill: 82.12612\",\"kwh: 905.5696<br />elecbill: 83.06893\",\"kwh: 915.3797<br />elecbill: 84.01173\",\"kwh: 925.1899<br />elecbill: 84.95454\",\"kwh: 935.0000<br />elecbill: 85.89734\"],\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"fitted values\",\"line\":{\"width\":7.55905511811024,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[892,533,521,554,638,700,583,935,789,864,778,617,586,160,736,1600],\"y\":[68.25,43.3,42.83,45.95,53,63.45,59.75,94.36,78.81,83.47,66.31,47.61,46.59,17.43,79.57,0],\"text\":[\"kwh:  892<br />elecbill: 68.25\",\"kwh:  533<br />elecbill: 43.30\",\"kwh:  521<br />elecbill: 42.83\",\"kwh:  554<br />elecbill: 45.95\",\"kwh:  638<br />elecbill: 53.00\",\"kwh:  700<br />elecbill: 63.45\",\"kwh:  583<br />elecbill: 59.75\",\"kwh:  935<br />elecbill: 94.36\",\"kwh:  789<br />elecbill: 78.81\",\"kwh:  864<br />elecbill: 83.47\",\"kwh:  778<br />elecbill: 66.31\",\"kwh:  617<br />elecbill: 47.61\",\"kwh:  586<br />elecbill: 46.59\",\"kwh:  160<br />elecbill: 17.43\",\"kwh:  736<br />elecbill: 79.57\",\"kwh: 1600<br />elecbill:  0.00\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,0,1)\",\"opacity\":0.4,\"size\":18.8976377952756,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x2\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[160,178.227848101266,196.455696202532,214.683544303797,232.911392405063,251.139240506329,269.367088607595,287.594936708861,305.822784810127,324.050632911392,342.278481012658,360.506329113924,378.73417721519,396.962025316456,415.189873417722,433.417721518987,451.645569620253,469.873417721519,488.101265822785,506.329113924051,524.556962025316,542.784810126582,561.012658227848,579.240506329114,597.46835443038,615.696202531646,633.924050632911,652.151898734177,670.379746835443,688.607594936709,706.835443037975,725.063291139241,743.291139240506,761.518987341772,779.746835443038,797.974683544304,816.20253164557,834.430379746835,852.658227848101,870.886075949367,889.113924050633,907.341772151899,925.569620253165,943.79746835443,962.025316455696,980.253164556962,998.481012658228,1016.70886075949,1034.93670886076,1053.16455696203,1071.39240506329,1089.62025316456,1107.84810126582,1126.07594936709,1144.30379746835,1162.53164556962,1180.75949367089,1198.98734177215,1217.21518987342,1235.44303797468,1253.67088607595,1271.89873417722,1290.12658227848,1308.35443037975,1326.58227848101,1344.81012658228,1363.03797468354,1381.26582278481,1399.49367088608,1417.72151898734,1435.94936708861,1454.17721518987,1472.40506329114,1490.63291139241,1508.86075949367,1527.08860759494,1545.3164556962,1563.54430379747,1581.77215189873,1600],\"y\":[56.6847624334653,56.6515246918273,56.6182869501892,56.5850492085512,56.5518114669131,56.5185737252751,56.485335983637,56.452098241999,56.4188605003609,56.3856227587228,56.3523850170848,56.3191472754467,56.2859095338087,56.2526717921706,56.2194340505326,56.1861963088945,56.1529585672565,56.1197208256184,56.0864830839803,56.0532453423423,56.0200076007042,55.9867698590662,55.9535321174281,55.9202943757901,55.887056634152,55.853818892514,55.8205811508759,55.7873434092378,55.7541056675998,55.7208679259617,55.6876301843237,55.6543924426856,55.6211547010476,55.5879169594095,55.5546792177715,55.5214414761334,55.4882037344953,55.4549659928573,55.4217282512192,55.3884905095812,55.3552527679431,55.3220150263051,55.288777284667,55.255539543029,55.2223018013909,55.1890640597528,55.1558263181148,55.1225885764767,55.0893508348387,55.0561130932006,55.0228753515626,54.9896376099245,54.9563998682865,54.9231621266484,54.8899243850103,54.8566866433723,54.8234489017342,54.7902111600962,54.7569734184581,54.7237356768201,54.690497935182,54.657260193544,54.6240224519059,54.5907847102678,54.5575469686298,54.5243092269917,54.4910714853537,54.4578337437156,54.4245960020776,54.3913582604395,54.3581205188014,54.3248827771634,54.2916450355253,54.2584072938873,54.2251695522492,54.1919318106112,54.1586940689731,54.1254563273351,54.092218585697,54.058980844059],\"text\":[\"kwh:  160.0000<br />elecbill: 56.68476\",\"kwh:  178.2278<br />elecbill: 56.65152\",\"kwh:  196.4557<br />elecbill: 56.61829\",\"kwh:  214.6835<br />elecbill: 56.58505\",\"kwh:  232.9114<br />elecbill: 56.55181\",\"kwh:  251.1392<br />elecbill: 56.51857\",\"kwh:  269.3671<br />elecbill: 56.48534\",\"kwh:  287.5949<br />elecbill: 56.45210\",\"kwh:  305.8228<br />elecbill: 56.41886\",\"kwh:  324.0506<br />elecbill: 56.38562\",\"kwh:  342.2785<br />elecbill: 56.35239\",\"kwh:  360.5063<br />elecbill: 56.31915\",\"kwh:  378.7342<br />elecbill: 56.28591\",\"kwh:  396.9620<br />elecbill: 56.25267\",\"kwh:  415.1899<br />elecbill: 56.21943\",\"kwh:  433.4177<br />elecbill: 56.18620\",\"kwh:  451.6456<br />elecbill: 56.15296\",\"kwh:  469.8734<br />elecbill: 56.11972\",\"kwh:  488.1013<br />elecbill: 56.08648\",\"kwh:  506.3291<br />elecbill: 56.05325\",\"kwh:  524.5570<br />elecbill: 56.02001\",\"kwh:  542.7848<br />elecbill: 55.98677\",\"kwh:  561.0127<br />elecbill: 55.95353\",\"kwh:  579.2405<br />elecbill: 55.92029\",\"kwh:  597.4684<br />elecbill: 55.88706\",\"kwh:  615.6962<br />elecbill: 55.85382\",\"kwh:  633.9241<br />elecbill: 55.82058\",\"kwh:  652.1519<br />elecbill: 55.78734\",\"kwh:  670.3797<br />elecbill: 55.75411\",\"kwh:  688.6076<br />elecbill: 55.72087\",\"kwh:  706.8354<br />elecbill: 55.68763\",\"kwh:  725.0633<br />elecbill: 55.65439\",\"kwh:  743.2911<br />elecbill: 55.62115\",\"kwh:  761.5190<br />elecbill: 55.58792\",\"kwh:  779.7468<br />elecbill: 55.55468\",\"kwh:  797.9747<br />elecbill: 55.52144\",\"kwh:  816.2025<br />elecbill: 55.48820\",\"kwh:  834.4304<br />elecbill: 55.45497\",\"kwh:  852.6582<br />elecbill: 55.42173\",\"kwh:  870.8861<br />elecbill: 55.38849\",\"kwh:  889.1139<br />elecbill: 55.35525\",\"kwh:  907.3418<br />elecbill: 55.32202\",\"kwh:  925.5696<br />elecbill: 55.28878\",\"kwh:  943.7975<br />elecbill: 55.25554\",\"kwh:  962.0253<br />elecbill: 55.22230\",\"kwh:  980.2532<br />elecbill: 55.18906\",\"kwh:  998.4810<br />elecbill: 55.15583\",\"kwh: 1016.7089<br />elecbill: 55.12259\",\"kwh: 1034.9367<br />elecbill: 55.08935\",\"kwh: 1053.1646<br />elecbill: 55.05611\",\"kwh: 1071.3924<br />elecbill: 55.02288\",\"kwh: 1089.6203<br />elecbill: 54.98964\",\"kwh: 1107.8481<br />elecbill: 54.95640\",\"kwh: 1126.0759<br />elecbill: 54.92316\",\"kwh: 1144.3038<br />elecbill: 54.88992\",\"kwh: 1162.5316<br />elecbill: 54.85669\",\"kwh: 1180.7595<br />elecbill: 54.82345\",\"kwh: 1198.9873<br />elecbill: 54.79021\",\"kwh: 1217.2152<br />elecbill: 54.75697\",\"kwh: 1235.4430<br />elecbill: 54.72374\",\"kwh: 1253.6709<br />elecbill: 54.69050\",\"kwh: 1271.8987<br />elecbill: 54.65726\",\"kwh: 1290.1266<br />elecbill: 54.62402\",\"kwh: 1308.3544<br />elecbill: 54.59078\",\"kwh: 1326.5823<br />elecbill: 54.55755\",\"kwh: 1344.8101<br />elecbill: 54.52431\",\"kwh: 1363.0380<br />elecbill: 54.49107\",\"kwh: 1381.2658<br />elecbill: 54.45783\",\"kwh: 1399.4937<br />elecbill: 54.42460\",\"kwh: 1417.7215<br />elecbill: 54.39136\",\"kwh: 1435.9494<br />elecbill: 54.35812\",\"kwh: 1454.1772<br />elecbill: 54.32488\",\"kwh: 1472.4051<br />elecbill: 54.29165\",\"kwh: 1490.6329<br />elecbill: 54.25841\",\"kwh: 1508.8608<br />elecbill: 54.22517\",\"kwh: 1527.0886<br />elecbill: 54.19193\",\"kwh: 1545.3165<br />elecbill: 54.15869\",\"kwh: 1563.5443<br />elecbill: 54.12546\",\"kwh: 1581.7722<br />elecbill: 54.09222\",\"kwh: 1600.0000<br />elecbill: 54.05898\"],\"type\":\"scatter\",\"mode\":\"lines\",\"name\":\"fitted values\",\"line\":{\"width\":7.55905511811024,\"color\":\"rgba(0,0,0,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x2\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"xaxis\":{\"domain\":[0,0.48],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-82.5,1732.5],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"500\",\"1000\",\"1500\"],\"tickvals\":[0,500,1000,1500],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"500\",\"1000\",\"1500\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"hoverformat\":\".2f\"},\"xaxis2\":{\"domain\":[0.52,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-82.5,1732.5],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"500\",\"1000\",\"1500\"],\"tickvals\":[0,500,1000,1500],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"500\",\"1000\",\"1500\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y2\",\"hoverformat\":\".2f\"},\"yaxis2\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,25,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x2\",\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,25,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"hoverformat\":\".2f\"},\"annotations\":[],\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":0.48,\"y0\":0,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0.52,\"x1\":1,\"y0\":0,\"y1\":1}],\"images\":[],\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":43.1050228310502},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":\"Regression Estimating the Mean Y\",\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.88976377952756,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"attrs\":{\"1f504e3b2d15\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"1f501c4e1649\":{\"x\":{},\"y\":{}},\"1f50168a202f\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"1f504fee33a9\":{\"x\":{},\"y\":{}}},\"source\":\"A\",\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"subplot\":true,\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n```{=html}\n<br><br>\n```\n\n::: {.cell}\n\n```{.r .cell-code}\nfig1 = Utilities %>% \n  head(15) %>% \n  ggplot(aes(x = kwh, y= elecbill)) +\n  geom_point(size=5, alpha=.4) +\n  # geom_smooth(method=\"lm\", se=F, linewidth=2, color=\"black\") +\n  geom_quantile(quantiles = 0.5, linewidth=2, color=\"purple\") +\n  theme_classic() +\n  labs(title=\"Without Outlier\")+\n  coord_cartesian(ylim=c(0,100), xlim=c(0,1650))\n\nfig2 = Utilities %>% \n  head(15) %>% \n  bind_rows(data.frame(kwh=1600, elecbill=0)) %>% \n  ggplot(aes(x = kwh, y= elecbill)) +\n  geom_point(size=5, alpha=.4) +\n  # geom_smooth(method=\"lm\", se=F, linewidth=2, color=\"black\") +\n  geom_quantile(quantiles = 0.5, linewidth=2, color=\"purple\") +\n  theme_classic()+\n  labs(title=\"With Outlier\")+\n  coord_cartesian(ylim=c(0,100), xlim=c(0,1650))\n\nsubplot(fig1 %>% ggplotly, fig2 %>% ggplotly) %>% \n  layout(title = 'Regression Estimating the Median Y')\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-df41a7eecd598a110288\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-df41a7eecd598a110288\">{\"x\":{\"data\":[{\"x\":[892,533,521,554,638,700,583,935,789,864,778,617,586,160,736],\"y\":[68.25,43.3,42.83,45.95,53,63.45,59.75,94.36,78.81,83.47,66.31,47.61,46.59,17.43,79.57],\"text\":[\"kwh: 892<br />elecbill: 68.25\",\"kwh: 533<br />elecbill: 43.30\",\"kwh: 521<br />elecbill: 42.83\",\"kwh: 554<br />elecbill: 45.95\",\"kwh: 638<br />elecbill: 53.00\",\"kwh: 700<br />elecbill: 63.45\",\"kwh: 583<br />elecbill: 59.75\",\"kwh: 935<br />elecbill: 94.36\",\"kwh: 789<br />elecbill: 78.81\",\"kwh: 864<br />elecbill: 83.47\",\"kwh: 778<br />elecbill: 66.31\",\"kwh: 617<br />elecbill: 47.61\",\"kwh: 586<br />elecbill: 46.59\",\"kwh: 160<br />elecbill: 17.43\",\"kwh: 736<br />elecbill: 79.57\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,0,1)\",\"opacity\":0.4,\"size\":18.8976377952756,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[160,167.828282828283,175.656565656566,183.484848484848,191.313131313131,199.141414141414,206.969696969697,214.79797979798,222.626262626263,230.454545454545,238.282828282828,246.111111111111,253.939393939394,261.767676767677,269.59595959596,277.424242424242,285.252525252525,293.080808080808,300.909090909091,308.737373737374,316.565656565657,324.393939393939,332.222222222222,340.050505050505,347.878787878788,355.707070707071,363.535353535354,371.363636363636,379.191919191919,387.020202020202,394.848484848485,402.676767676768,410.50505050505,418.333333333333,426.161616161616,433.989898989899,441.818181818182,449.646464646465,457.474747474747,465.30303030303,473.131313131313,480.959595959596,488.787878787879,496.616161616162,504.444444444444,512.272727272727,520.10101010101,527.929292929293,535.757575757576,543.585858585859,551.414141414141,559.242424242424,567.070707070707,574.89898989899,582.727272727273,590.555555555556,598.383838383838,606.212121212121,614.040404040404,621.868686868687,629.69696969697,637.525252525252,645.353535353535,653.181818181818,661.010101010101,668.838383838384,676.666666666667,684.494949494949,692.323232323232,700.151515151515,707.979797979798,715.808080808081,723.636363636364,731.464646464646,739.292929292929,747.121212121212,754.949494949495,762.777777777778,770.606060606061,778.434343434343,786.262626262626,794.090909090909,801.919191919192,809.747474747475,817.575757575758,825.40404040404,833.232323232323,841.060606060606,848.888888888889,856.717171717172,864.545454545455,872.373737373737,880.20202020202,888.030303030303,895.858585858586,903.686868686869,911.515151515152,919.343434343434,927.171717171717,935],\"y\":[1.24441340782121,2.14619660290049,3.04797979797978,3.94976299305906,4.85154618813835,5.75332938321763,6.65511257829692,7.5568957733762,8.45867896845549,9.36046216353477,10.2622453586141,11.1640285536933,12.0658117487726,12.9675949438519,13.8693781389312,14.7711613340105,15.6729445290898,16.5747277241691,17.4765109192483,18.3782941143276,19.2800773094069,20.1818605044862,21.0836436995655,21.9854268946448,22.887210089724,23.7889932848033,24.6907764798826,25.5925596749619,26.4943428700412,27.3961260651205,28.2979092601998,29.199692455279,30.1014756503583,31.0032588454376,31.9050420405169,32.8068252355962,33.7086084306755,34.6103916257547,35.512174820834,36.4139580159133,37.3157412109926,38.2175244060719,39.1193076011512,40.0210907962305,40.9228739913097,41.824657186389,42.7264403814683,43.6282235765476,44.5300067716269,45.4317899667062,46.3335731617854,47.2353563568647,48.137139551944,49.0389227470233,49.9407059421026,50.8424891371819,51.7442723322612,52.6460555273404,53.5478387224197,54.449621917499,55.3514051125783,56.2531883076576,57.1549715027369,58.0567546978162,58.9585378928954,59.8603210879747,60.762104283054,61.6638874781333,62.5656706732126,63.4674538682919,64.3692370633711,65.2710202584504,66.1728034535297,67.074586648609,67.9763698436883,68.8781530387676,69.7799362338469,70.6817194289261,71.5835026240054,72.4852858190847,73.387069014164,74.2888522092433,75.1906354043226,76.0924185994018,76.9942017944811,77.8959849895604,78.7977681846397,79.699551379719,80.6013345747983,81.5031177698775,82.4049009649569,83.3066841600361,84.2084673551154,85.1102505501947,86.012033745274,86.9138169403533,87.8156001354326,88.7173833305118,89.6191665255911,90.5209497206704],\"text\":[\"kwh: 160.0000<br />elecbill:  1.244413\",\"kwh: 167.8283<br />elecbill:  2.146197\",\"kwh: 175.6566<br />elecbill:  3.047980\",\"kwh: 183.4848<br />elecbill:  3.949763\",\"kwh: 191.3131<br />elecbill:  4.851546\",\"kwh: 199.1414<br />elecbill:  5.753329\",\"kwh: 206.9697<br />elecbill:  6.655113\",\"kwh: 214.7980<br />elecbill:  7.556896\",\"kwh: 222.6263<br />elecbill:  8.458679\",\"kwh: 230.4545<br />elecbill:  9.360462\",\"kwh: 238.2828<br />elecbill: 10.262245\",\"kwh: 246.1111<br />elecbill: 11.164029\",\"kwh: 253.9394<br />elecbill: 12.065812\",\"kwh: 261.7677<br />elecbill: 12.967595\",\"kwh: 269.5960<br />elecbill: 13.869378\",\"kwh: 277.4242<br />elecbill: 14.771161\",\"kwh: 285.2525<br />elecbill: 15.672945\",\"kwh: 293.0808<br />elecbill: 16.574728\",\"kwh: 300.9091<br />elecbill: 17.476511\",\"kwh: 308.7374<br />elecbill: 18.378294\",\"kwh: 316.5657<br />elecbill: 19.280077\",\"kwh: 324.3939<br />elecbill: 20.181861\",\"kwh: 332.2222<br />elecbill: 21.083644\",\"kwh: 340.0505<br />elecbill: 21.985427\",\"kwh: 347.8788<br />elecbill: 22.887210\",\"kwh: 355.7071<br />elecbill: 23.788993\",\"kwh: 363.5354<br />elecbill: 24.690776\",\"kwh: 371.3636<br />elecbill: 25.592560\",\"kwh: 379.1919<br />elecbill: 26.494343\",\"kwh: 387.0202<br />elecbill: 27.396126\",\"kwh: 394.8485<br />elecbill: 28.297909\",\"kwh: 402.6768<br />elecbill: 29.199692\",\"kwh: 410.5051<br />elecbill: 30.101476\",\"kwh: 418.3333<br />elecbill: 31.003259\",\"kwh: 426.1616<br />elecbill: 31.905042\",\"kwh: 433.9899<br />elecbill: 32.806825\",\"kwh: 441.8182<br />elecbill: 33.708608\",\"kwh: 449.6465<br />elecbill: 34.610392\",\"kwh: 457.4747<br />elecbill: 35.512175\",\"kwh: 465.3030<br />elecbill: 36.413958\",\"kwh: 473.1313<br />elecbill: 37.315741\",\"kwh: 480.9596<br />elecbill: 38.217524\",\"kwh: 488.7879<br />elecbill: 39.119308\",\"kwh: 496.6162<br />elecbill: 40.021091\",\"kwh: 504.4444<br />elecbill: 40.922874\",\"kwh: 512.2727<br />elecbill: 41.824657\",\"kwh: 520.1010<br />elecbill: 42.726440\",\"kwh: 527.9293<br />elecbill: 43.628224\",\"kwh: 535.7576<br />elecbill: 44.530007\",\"kwh: 543.5859<br />elecbill: 45.431790\",\"kwh: 551.4141<br />elecbill: 46.333573\",\"kwh: 559.2424<br />elecbill: 47.235356\",\"kwh: 567.0707<br />elecbill: 48.137140\",\"kwh: 574.8990<br />elecbill: 49.038923\",\"kwh: 582.7273<br />elecbill: 49.940706\",\"kwh: 590.5556<br />elecbill: 50.842489\",\"kwh: 598.3838<br />elecbill: 51.744272\",\"kwh: 606.2121<br />elecbill: 52.646056\",\"kwh: 614.0404<br />elecbill: 53.547839\",\"kwh: 621.8687<br />elecbill: 54.449622\",\"kwh: 629.6970<br />elecbill: 55.351405\",\"kwh: 637.5253<br />elecbill: 56.253188\",\"kwh: 645.3535<br />elecbill: 57.154972\",\"kwh: 653.1818<br />elecbill: 58.056755\",\"kwh: 661.0101<br />elecbill: 58.958538\",\"kwh: 668.8384<br />elecbill: 59.860321\",\"kwh: 676.6667<br />elecbill: 60.762104\",\"kwh: 684.4949<br />elecbill: 61.663887\",\"kwh: 692.3232<br />elecbill: 62.565671\",\"kwh: 700.1515<br />elecbill: 63.467454\",\"kwh: 707.9798<br />elecbill: 64.369237\",\"kwh: 715.8081<br />elecbill: 65.271020\",\"kwh: 723.6364<br />elecbill: 66.172803\",\"kwh: 731.4646<br />elecbill: 67.074587\",\"kwh: 739.2929<br />elecbill: 67.976370\",\"kwh: 747.1212<br />elecbill: 68.878153\",\"kwh: 754.9495<br />elecbill: 69.779936\",\"kwh: 762.7778<br />elecbill: 70.681719\",\"kwh: 770.6061<br />elecbill: 71.583503\",\"kwh: 778.4343<br />elecbill: 72.485286\",\"kwh: 786.2626<br />elecbill: 73.387069\",\"kwh: 794.0909<br />elecbill: 74.288852\",\"kwh: 801.9192<br />elecbill: 75.190635\",\"kwh: 809.7475<br />elecbill: 76.092419\",\"kwh: 817.5758<br />elecbill: 76.994202\",\"kwh: 825.4040<br />elecbill: 77.895985\",\"kwh: 833.2323<br />elecbill: 78.797768\",\"kwh: 841.0606<br />elecbill: 79.699551\",\"kwh: 848.8889<br />elecbill: 80.601335\",\"kwh: 856.7172<br />elecbill: 81.503118\",\"kwh: 864.5455<br />elecbill: 82.404901\",\"kwh: 872.3737<br />elecbill: 83.306684\",\"kwh: 880.2020<br />elecbill: 84.208467\",\"kwh: 888.0303<br />elecbill: 85.110251\",\"kwh: 895.8586<br />elecbill: 86.012034\",\"kwh: 903.6869<br />elecbill: 86.913817\",\"kwh: 911.5152<br />elecbill: 87.815600\",\"kwh: 919.3434<br />elecbill: 88.717383\",\"kwh: 927.1717<br />elecbill: 89.619167\",\"kwh: 935.0000<br />elecbill: 90.520950\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":7.55905511811024,\"color\":\"rgba(160,32,240,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[892,533,521,554,638,700,583,935,789,864,778,617,586,160,736,1600],\"y\":[68.25,43.3,42.83,45.95,53,63.45,59.75,94.36,78.81,83.47,66.31,47.61,46.59,17.43,79.57,0],\"text\":[\"kwh:  892<br />elecbill: 68.25\",\"kwh:  533<br />elecbill: 43.30\",\"kwh:  521<br />elecbill: 42.83\",\"kwh:  554<br />elecbill: 45.95\",\"kwh:  638<br />elecbill: 53.00\",\"kwh:  700<br />elecbill: 63.45\",\"kwh:  583<br />elecbill: 59.75\",\"kwh:  935<br />elecbill: 94.36\",\"kwh:  789<br />elecbill: 78.81\",\"kwh:  864<br />elecbill: 83.47\",\"kwh:  778<br />elecbill: 66.31\",\"kwh:  617<br />elecbill: 47.61\",\"kwh:  586<br />elecbill: 46.59\",\"kwh:  160<br />elecbill: 17.43\",\"kwh:  736<br />elecbill: 79.57\",\"kwh: 1600<br />elecbill:  0.00\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,0,0,1)\",\"opacity\":0.4,\"size\":18.8976377952756,\"symbol\":\"circle\",\"line\":{\"width\":1.88976377952756,\"color\":\"rgba(0,0,0,1)\"}},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x2\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[160,174.545454545455,189.090909090909,203.636363636364,218.181818181818,232.727272727273,247.272727272727,261.818181818182,276.363636363636,290.909090909091,305.454545454545,320,334.545454545455,349.090909090909,363.636363636364,378.181818181818,392.727272727273,407.272727272727,421.818181818182,436.363636363636,450.909090909091,465.454545454545,480,494.545454545455,509.090909090909,523.636363636364,538.181818181818,552.727272727273,567.272727272727,581.818181818182,596.363636363636,610.909090909091,625.454545454545,640,654.545454545455,669.090909090909,683.636363636364,698.181818181818,712.727272727273,727.272727272727,741.818181818182,756.363636363636,770.909090909091,785.454545454545,800,814.545454545455,829.090909090909,843.636363636364,858.181818181818,872.727272727273,887.272727272727,901.818181818182,916.363636363636,930.909090909091,945.454545454545,960,974.545454545455,989.090909090909,1003.63636363636,1018.18181818182,1032.72727272727,1047.27272727273,1061.81818181818,1076.36363636364,1090.90909090909,1105.45454545455,1120,1134.54545454545,1149.09090909091,1163.63636363636,1178.18181818182,1192.72727272727,1207.27272727273,1221.81818181818,1236.36363636364,1250.90909090909,1265.45454545455,1280,1294.54545454545,1309.09090909091,1323.63636363636,1338.18181818182,1352.72727272727,1367.27272727273,1381.81818181818,1396.36363636364,1410.90909090909,1425.45454545455,1440,1454.54545454545,1469.09090909091,1483.63636363636,1498.18181818182,1512.72727272727,1527.27272727273,1541.81818181818,1556.36363636364,1570.90909090909,1585.45454545455,1600],\"y\":[17.43,18.5123887409661,19.5947774819323,20.6771662228984,21.7595549638646,22.8419437048307,23.9243324457969,25.006721186763,26.0891099277292,27.1714986686953,28.2538874096615,29.3362761506276,30.4186648915938,31.5010536325599,32.5834423735261,33.6658311144922,34.7482198554583,35.8306085964245,36.9129973373906,37.9953860783568,39.0777748193229,40.1601635602891,41.2425523012552,42.3249410422214,43.4073297831875,44.4897185241537,45.5721072651198,46.654496006086,47.7368847470521,48.8192734880183,49.9016622289844,50.9840509699505,52.0664397109167,53.1488284518828,54.231217192849,55.3136059338151,56.3959946747813,57.4783834157474,58.5607721567136,59.6431608976797,60.7255496386459,61.807938379612,62.8903271205782,63.9727158615443,65.0551046025105,66.1374933434766,67.2198820844428,68.3022708254089,69.384659566375,70.4670483073412,71.5494370483073,72.6318257892735,73.7142145302396,74.7966032712058,75.8789920121719,76.9613807531381,78.0437694941042,79.1261582350704,80.2085469760365,81.2909357170027,82.3733244579688,83.455713198935,84.5381019399011,85.6204906808673,86.7028794218334,87.7852681627996,88.8676569037657,89.9500456447318,91.032434385698,92.1148231266641,93.1972118676303,94.2796006085964,95.3619893495626,96.4443780905287,97.5267668314949,98.609155572461,99.6915443134272,100.773933054393,101.856321795359,102.938710536326,104.021099277292,105.103488018258,106.185876759224,107.26826550019,108.350654241156,109.433042982122,110.515431723089,111.597820464055,112.680209205021,113.762597945987,114.844986686953,115.927375427919,117.009764168886,118.092152909852,119.174541650818,120.256930391784,121.33931913275,122.421707873716,123.504096614682,124.586485355649],\"text\":[\"kwh:  160.0000<br />elecbill:  17.43000\",\"kwh:  174.5455<br />elecbill:  18.51239\",\"kwh:  189.0909<br />elecbill:  19.59478\",\"kwh:  203.6364<br />elecbill:  20.67717\",\"kwh:  218.1818<br />elecbill:  21.75955\",\"kwh:  232.7273<br />elecbill:  22.84194\",\"kwh:  247.2727<br />elecbill:  23.92433\",\"kwh:  261.8182<br />elecbill:  25.00672\",\"kwh:  276.3636<br />elecbill:  26.08911\",\"kwh:  290.9091<br />elecbill:  27.17150\",\"kwh:  305.4545<br />elecbill:  28.25389\",\"kwh:  320.0000<br />elecbill:  29.33628\",\"kwh:  334.5455<br />elecbill:  30.41866\",\"kwh:  349.0909<br />elecbill:  31.50105\",\"kwh:  363.6364<br />elecbill:  32.58344\",\"kwh:  378.1818<br />elecbill:  33.66583\",\"kwh:  392.7273<br />elecbill:  34.74822\",\"kwh:  407.2727<br />elecbill:  35.83061\",\"kwh:  421.8182<br />elecbill:  36.91300\",\"kwh:  436.3636<br />elecbill:  37.99539\",\"kwh:  450.9091<br />elecbill:  39.07777\",\"kwh:  465.4545<br />elecbill:  40.16016\",\"kwh:  480.0000<br />elecbill:  41.24255\",\"kwh:  494.5455<br />elecbill:  42.32494\",\"kwh:  509.0909<br />elecbill:  43.40733\",\"kwh:  523.6364<br />elecbill:  44.48972\",\"kwh:  538.1818<br />elecbill:  45.57211\",\"kwh:  552.7273<br />elecbill:  46.65450\",\"kwh:  567.2727<br />elecbill:  47.73688\",\"kwh:  581.8182<br />elecbill:  48.81927\",\"kwh:  596.3636<br />elecbill:  49.90166\",\"kwh:  610.9091<br />elecbill:  50.98405\",\"kwh:  625.4545<br />elecbill:  52.06644\",\"kwh:  640.0000<br />elecbill:  53.14883\",\"kwh:  654.5455<br />elecbill:  54.23122\",\"kwh:  669.0909<br />elecbill:  55.31361\",\"kwh:  683.6364<br />elecbill:  56.39599\",\"kwh:  698.1818<br />elecbill:  57.47838\",\"kwh:  712.7273<br />elecbill:  58.56077\",\"kwh:  727.2727<br />elecbill:  59.64316\",\"kwh:  741.8182<br />elecbill:  60.72555\",\"kwh:  756.3636<br />elecbill:  61.80794\",\"kwh:  770.9091<br />elecbill:  62.89033\",\"kwh:  785.4545<br />elecbill:  63.97272\",\"kwh:  800.0000<br />elecbill:  65.05510\",\"kwh:  814.5455<br />elecbill:  66.13749\",\"kwh:  829.0909<br />elecbill:  67.21988\",\"kwh:  843.6364<br />elecbill:  68.30227\",\"kwh:  858.1818<br />elecbill:  69.38466\",\"kwh:  872.7273<br />elecbill:  70.46705\",\"kwh:  887.2727<br />elecbill:  71.54944\",\"kwh:  901.8182<br />elecbill:  72.63183\",\"kwh:  916.3636<br />elecbill:  73.71421\",\"kwh:  930.9091<br />elecbill:  74.79660\",\"kwh:  945.4545<br />elecbill:  75.87899\",\"kwh:  960.0000<br />elecbill:  76.96138\",\"kwh:  974.5455<br />elecbill:  78.04377\",\"kwh:  989.0909<br />elecbill:  79.12616\",\"kwh: 1003.6364<br />elecbill:  80.20855\",\"kwh: 1018.1818<br />elecbill:  81.29094\",\"kwh: 1032.7273<br />elecbill:  82.37332\",\"kwh: 1047.2727<br />elecbill:  83.45571\",\"kwh: 1061.8182<br />elecbill:  84.53810\",\"kwh: 1076.3636<br />elecbill:  85.62049\",\"kwh: 1090.9091<br />elecbill:  86.70288\",\"kwh: 1105.4545<br />elecbill:  87.78527\",\"kwh: 1120.0000<br />elecbill:  88.86766\",\"kwh: 1134.5455<br />elecbill:  89.95005\",\"kwh: 1149.0909<br />elecbill:  91.03243\",\"kwh: 1163.6364<br />elecbill:  92.11482\",\"kwh: 1178.1818<br />elecbill:  93.19721\",\"kwh: 1192.7273<br />elecbill:  94.27960\",\"kwh: 1207.2727<br />elecbill:  95.36199\",\"kwh: 1221.8182<br />elecbill:  96.44438\",\"kwh: 1236.3636<br />elecbill:  97.52677\",\"kwh: 1250.9091<br />elecbill:  98.60916\",\"kwh: 1265.4545<br />elecbill:  99.69154\",\"kwh: 1280.0000<br />elecbill: 100.77393\",\"kwh: 1294.5455<br />elecbill: 101.85632\",\"kwh: 1309.0909<br />elecbill: 102.93871\",\"kwh: 1323.6364<br />elecbill: 104.02110\",\"kwh: 1338.1818<br />elecbill: 105.10349\",\"kwh: 1352.7273<br />elecbill: 106.18588\",\"kwh: 1367.2727<br />elecbill: 107.26827\",\"kwh: 1381.8182<br />elecbill: 108.35065\",\"kwh: 1396.3636<br />elecbill: 109.43304\",\"kwh: 1410.9091<br />elecbill: 110.51543\",\"kwh: 1425.4545<br />elecbill: 111.59782\",\"kwh: 1440.0000<br />elecbill: 112.68021\",\"kwh: 1454.5455<br />elecbill: 113.76260\",\"kwh: 1469.0909<br />elecbill: 114.84499\",\"kwh: 1483.6364<br />elecbill: 115.92738\",\"kwh: 1498.1818<br />elecbill: 117.00976\",\"kwh: 1512.7273<br />elecbill: 118.09215\",\"kwh: 1527.2727<br />elecbill: 119.17454\",\"kwh: 1541.8182<br />elecbill: 120.25693\",\"kwh: 1556.3636<br />elecbill: 121.33932\",\"kwh: 1570.9091<br />elecbill: 122.42171\",\"kwh: 1585.4545<br />elecbill: 123.50410\",\"kwh: 1600.0000<br />elecbill: 124.58649\"],\"type\":\"scatter\",\"mode\":\"lines\",\"line\":{\"width\":7.55905511811024,\"color\":\"rgba(160,32,240,1)\",\"dash\":\"solid\"},\"hoveron\":\"points\",\"showlegend\":false,\"xaxis\":\"x2\",\"yaxis\":\"y2\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"xaxis\":{\"domain\":[0,0.48],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-82.5,1732.5],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"500\",\"1000\",\"1500\"],\"tickvals\":[0,500,1000,1500],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"500\",\"1000\",\"1500\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"hoverformat\":\".2f\"},\"xaxis2\":{\"domain\":[0.52,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-82.5,1732.5],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"500\",\"1000\",\"1500\"],\"tickvals\":[0,500,1000,1500],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"500\",\"1000\",\"1500\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y2\",\"hoverformat\":\".2f\"},\"yaxis2\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,25,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x2\",\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[-5,105],\"tickmode\":\"array\",\"ticktext\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"tickvals\":[0,25,50,75,100],\"categoryorder\":\"array\",\"categoryarray\":[\"0\",\"25\",\"50\",\"75\",\"100\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.65296803652968,\"tickwidth\":0.66417600664176,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.689497716895},\"tickangle\":-0,\"showline\":true,\"linecolor\":\"rgba(0,0,0,1)\",\"linewidth\":0.66417600664176,\"showgrid\":false,\"gridcolor\":null,\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"hoverformat\":\".2f\"},\"annotations\":[],\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0,\"x1\":0.48,\"y0\":0,\"y1\":1},{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"x0\":0.52,\"x1\":1,\"y0\":0,\"y1\":1}],\"images\":[],\"margin\":{\"t\":43.7625570776256,\"r\":7.30593607305936,\"b\":40.1826484018265,\"l\":43.1050228310502},\"plot_bgcolor\":\"rgba(255,255,255,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.6118721461187},\"title\":\"Regression Estimating the Median Y\",\"showlegend\":false,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":1.88976377952756,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.689497716895}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"attrs\":{\"1f503ef477b9\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"1f5038f2e0e\":{\"x\":{},\"y\":{}},\"1f50566f1e7c\":{\"x\":{},\"y\":{},\"type\":\"scatter\"},\"1f5013762a75\":{\"x\":{},\"y\":{}}},\"source\":\"A\",\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.2,\"selected\":{\"opacity\":1},\"debounce\":0},\"subplot\":true,\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(quantreg)\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning: package 'quantreg' was built under R version 4.2.3\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nLoading required package: SparseM\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\n\nAttaching package: 'SparseM'\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nThe following object is masked from 'package:base':\n\n    backsolve\n```\n\n\n:::\n\n```{.r .cell-code}\ndf = Utilities %>% \n  head(15) %>% \n  bind_rows(data.frame(kwh=1600, elecbill=0)) \n\n# model assumes slopes are the same\navg_reg <- lm(elecbill ~ kwh, data = df)\nmed_reg <- rq(elecbill ~ kwh, data = df, tau = .5)\n\nAIC(avg_reg, med_reg) %>% \n  pander::pander()\n```\n\n::: {.cell-output-display}\n\n--------------------------\n   &nbsp;      df    AIC  \n------------- ---- -------\n **avg_reg**   3    152.5 \n\n **med_reg**   2    142.8 \n--------------------------\n\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sjPlot) \ntheme_set(theme_bw())\nplot_models(avg_reg, med_reg, show.values = TRUE, \n            m.labels = c(\"Linear model\", \"Median model\"), \n            legend.title = \"Model type\")\n```\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in rq.fit.br(x, y, tau = tau, ci = TRUE, ...): Solution may be nonunique\n```\n\n\n:::\n\n::: {.cell-output .cell-output-stderr}\n\n```\nWarning in summary.rq(x, covariance = TRUE): 1 non-positive fis\n\nWarning in summary.rq(x, covariance = TRUE): 1 non-positive fis\n\nWarning in summary.rq(x, covariance = TRUE): 1 non-positive fis\n```\n\n\n:::\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\ncheck out\n\nhttps://yuzar-blog.netlify.app/posts/2022-12-01-quantileregression/\nhttps://www.youtube.com/watch?v=Gtz8ca_4hVg\nhttps://www.youtube.com/watch?v=OQGIdfEHNnQ\nhttps://www.jmlr.org/papers/volume7/meinshausen06a/meinshausen06a.pdf\nhttps://academic.oup.com/jrsssd/article-abstract/52/3/331/7123575\nhttps://www.sebastianbuhai.com/papers/publications/quantile_regressions.pdf\nhttps://support.sas.com/resources/papers/proceedings/proceedings/sugi30/213-30.pdf\nhttp://www.econ.uiuc.edu/~roger/research/intro/rq3.pdf\nhttps://www2.stat.duke.edu/~fl35/teaching/440-19F/decks/cs01_5_deck.html#/class-exercise-2",
    "supporting": [
      "index_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\r\n<script src=\"../../site_libs/plotly-binding-4.10.1/plotly.js\"></script>\r\n<script src=\"../../site_libs/typedarray-0.1/typedarray.min.js\"></script>\r\n<script src=\"../../site_libs/jquery-3.5.1/jquery.min.js\"></script>\r\n<link href=\"../../site_libs/crosstalk-1.2.0/css/crosstalk.min.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/crosstalk-1.2.0/js/crosstalk.min.js\"></script>\r\n<link href=\"../../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}