<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.40">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>historytemp – AJ Averett</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
.display.math{display: block; text-align: center; margin: 0.5rem auto;}
</style>


<link href="../images/favicon.png" rel="icon" type="image/png">
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<script src="https://cdn.tailwindcss.com"></script>

<link href="https://fonts.googleapis.com/css2?family=IM+Fell+English:ital@0;1&amp;family=Lato:wght@400;700&amp;display=swap" rel="stylesheet">


<link rel="stylesheet" href="../styles/historytemp.css">
<meta property="og:title" content="– AJ Averett">
<meta property="og:site_name" content="AJ Averett">
<meta name="twitter:title" content="– AJ Averett">
<meta name="twitter:card" content="summary">
</head>

<body class="bg-[#fdfbf7] text-[#2c1810] overflow-hidden h-screen w-screen selection:bg-[#8b0000] selection:text-white">







    <div id="cinematic-bg" class="absolute inset-0 bg-cover bg-center opacity-0 transition-opacity duration-1000 z-0 pointer-events-none"></div>

    <div class="relative z-10 flex h-full w-full">

        <div id="sidebar" class="flex-none w-[60px] md:w-[200px] h-full bg-[#f4f1ea] border-r-2 border-[#dcd6ce] z-20 shadow-xl overflow-hidden relative flex flex-col">
            
            <div class="h-[50px] hidden md:flex items-center justify-center border-b border-[#dcd6ce] font-fell italic text-xl flex-none bg-[#f4f1ea] z-10">
                <span>United </span>
            </div>
            
            <div id="state-list-container" class="flex flex-col overflow-y-auto">
                </div>
        </div>

        <div id="timeline-viewport" class="flex-1 relative overflow-x-scroll overflow-y-hidden custom-scrollbar">
            
            <div id="playhead" class="fixed top-0 bottom-0 left-1/2 w-[2px] bg-[#8b0000] z-30 transform -translate-x-1/2 pointer-events-none shadow-[0_0_10px_rgba(139,0,0,0.5)]">
                <div class="absolute top-2 left-1/2 -translate-x-1/2 bg-[#8b0000] text-[#fdfbf7] px-2 py-1 text-xs font-bold rounded font-lato">
                    <span id="current-date-display">1785</span>
                </div>
            </div>

            <div id="timeline-content" class="relative h-full">
                
                <div id="timeline-offset" class="relative w-full h-full mt-0 md:mt-[50px]">
                    
                    <div id="grid-lines" class="absolute inset-0 pointer-events-none"></div>
                    
                    <div id="events-container" class="absolute inset-0 w-full h-full"></div>
                    
                </div>
            </div>

        </div>
    </div>

    <div id="info-card" class="fixed bottom-0 right-0 md:bottom-8 md:right-8 w-full md:w-[400px] bg-paper border-t-4 md:border-4 border-ink/80 shadow-2xl transform translate-y-[120%] transition-transform duration-500 z-[100] p-6 rounded-t-lg md:rounded-lg">
        <div id="card-content">
            <div id="card-image-container" class="hidden mb-4 overflow-hidden rounded border border-[#2c1810] opacity-80 sepia">
                <img id="card-image" src="" alt="" class="w-full h-48 object-cover">
            </div>
            
            <h2 id="card-title" class="font-fell text-2xl md:text-3xl mb-2 text-[#8b0000] border-b border-[#2c1810]/20 pb-2 anchored">Event Title</h2>
            <p id="card-date" class="font-lato text-xs md:text-sm font-bold text-[#2c1810]/60 mb-2">Date</p>
            <p id="card-desc" class="font-lato text-sm md:text-base leading-relaxed">Description goes here.</p>
        </div>
    </div>

 



<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/ajaverett\.com");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
});
</script>
<script>
    // --- CONFIGURATION ---
    const CONFIG = {
        START_DATE: new Date("1785-01-01"),
        END_DATE: new Date("1790-12-31"),
        TOTAL_WIDTH: 12000, // Pixels for the total timeline length
        TRIGGER_THRESHOLD: 300, // Pixels from center to trigger event
    };

    // Hardcoded States (sorted by ratification generally, or geographic)
    const STATES = [
        { name: "Delaware", abbr: "DE" },
        { name: "Pennsylvania", abbr: "PA" },
        { name: "New Jersey", abbr: "NJ" },
        { name: "Georgia", abbr: "GA" },
        { name: "Connecticut", abbr: "CT" },
        { name: "Massachusetts", abbr: "MA" },
        { name: "Maryland", abbr: "MD" },
        { name: "South Carolina", abbr: "SC" },
        { name: "New Hampshire", abbr: "NH" },
        { name: "Virginia", abbr: "VA" },
        { name: "New York", abbr: "NY" },
        { name: "North Carolina", abbr: "NC" },
        { name: "Rhode Island", abbr: "RI" }
    ];

    let eventsData = [];
    let activeEventId = null;

    // --- DOM ELEMENTS ---
    const elements = {
        sidebar: document.getElementById('state-list-container'),
        timelineViewport: document.getElementById('timeline-viewport'),
        timelineContent: document.getElementById('timeline-content'),
        gridLines: document.getElementById('grid-lines'),
        eventsContainer: document.getElementById('events-container'),
        infoCard: document.getElementById('info-card'),
        cinematicBg: document.getElementById('cinematic-bg'),
        dateDisplay: document.getElementById('current-date-display'),
        // Card Elements
        cardTitle: document.getElementById('card-title'),
        cardDate: document.getElementById('card-date'),
        cardDesc: document.getElementById('card-desc'),
        cardImgContainer: document.getElementById('card-image-container'),
        cardImg: document.getElementById('card-image')
    };

    // --- INITIALIZATION ---

    async function init() {
        setupLayout();
        renderSidebar();
        renderGridBackground();

        // Fetch Data
        try {
            const response = await fetch('data/history_events.json');
            if (!response.ok) throw new Error('Network response not ok');
            eventsData = await response.json();
            renderEvents();

            // Start Loop
            requestAnimationFrame(updateLoop);
        } catch (error) {
            console.error("Error loading events:", error);
        }
    }

    function setupLayout() {
        // 1. Set Timeline Width
        elements.timelineContent.style.width = `${CONFIG.TOTAL_WIDTH}px`;

        // 2. The Center Scroll Fix
        // Add 50vw padding to left and right so the start/end can reach the center playhead
        const halfScreen = window.innerWidth / 2;
        elements.timelineContent.style.paddingLeft = `${halfScreen}px`;
        elements.timelineContent.style.paddingRight = `${halfScreen}px`;
    }

    // --- RENDERING ---

    function renderSidebar() {
        STATES.forEach((state, index) => {
            const row = document.createElement('div');
            row.className = 'state-row h-[40px] flex items-center px-4 font-lato text-sm';
            row.dataset.state = state.name; // For referencing later
            row.innerHTML = `
                <span class="hidden md:block font-bold">${state.name}</span>
                <span class="md:hidden font-bold">${state.abbr}</span>
            `;
            elements.sidebar.appendChild(row);
        });
    }

    function renderGridBackground() {
        // 1. Horizontal Lines (matching sidebar rows)
        STATES.forEach((state, index) => {
            const line = document.createElement('div');
            line.className = 'timeline-row-line h-[40px] w-full absolute';
            line.style.top = `${index * 40}px`; // Match sidebar height
            line.dataset.stateRow = state.name;
            elements.gridLines.appendChild(line);
        });

        // 2. Vertical Year Markers
        const startYear = CONFIG.START_DATE.getFullYear();
        const endYear = CONFIG.END_DATE.getFullYear();

        for (let year = startYear; year <= endYear; year++) {
            const dateStr = `${year}-01-01`;
            const leftPos = dateToPixel(dateStr);

            const marker = document.createElement('div');
            marker.className = 'absolute top-0 bottom-0 border-l border-[#2c1810]/20 font-fell text-4xl text-[#2c1810]/10 pl-2 select-none';
            marker.style.left = `${leftPos}px`;
            marker.innerText = year;
            elements.gridLines.appendChild(marker);
        }
    }

    function renderEvents() {
        eventsData.forEach((event, index) => {
            const leftPos = dateToPixel(event.date);
            event.id = index;

            // 1. THE WALL LABEL
            const label = document.createElement('div');
            // CHANGED: Added 'md:-top-[40px]' to lift the text up into the header area on desktop
            label.className = 'absolute top-2 md:-top-[40px] transform -translate-x-1/2 font-fell italic text-2xl text-[#2c1810]/40 whitespace-nowrap select-none z-0 pointer-events-none';
            label.style.left = `${leftPos}px`;
            label.innerText = event.title;
            elements.eventsContainer.appendChild(label);

            // 2. VERTICAL DROP LINE (Dashed - for normal events)
            const dropLine = document.createElement('div');
            dropLine.className = 'absolute top-12 bottom-0 border-l border-dashed border-[#2c1810]/20 pointer-events-none';
            dropLine.style.left = `${leftPos}px`;
            elements.eventsContainer.appendChild(dropLine);

            // Save element for scroll detection
            event.domElement = dropLine;

            // 3. State Markers
            if (event.involved.includes("All")) {
                // Union Line (For "All" events)
                const unionLine = document.createElement('div');
                // CHANGED: Added 'md:-top-[50px]' so the line extends to the very top of the screen on desktop
                unionLine.className = 'absolute top-0 md:-top-[50px] bottom-0 w-[4px] bg-[#2c1810] z-20 transform -translate-x-1/2';
                unionLine.style.left = `${leftPos}px`;

                const badge = document.createElement('div');
                badge.className = 'absolute top-[40%] left-1/2 transform -translate-x-1/2 bg-[#2c1810] text-[#fdfbf7] px-3 py-1 font-fell text-lg tracking-widest whitespace-nowrap shadow-lg border border-[#fdfbf7]/20';
                badge.innerText = event.title.toUpperCase();

                unionLine.appendChild(badge);
                elements.eventsContainer.appendChild(unionLine);
            } else {
                // Individual State Diamonds
                event.involved.forEach(stateName => {
                    const stateIndex = STATES.findIndex(s => s.name === stateName);
                    if (stateIndex === -1) return;
                    const topPos = (stateIndex * 40) + 20;

                    const diamond = document.createElement('div');
                    diamond.className = 'marker-diamond absolute w-4 h-4 bg-[#8b0000] rotate-45 transform -translate-x-1/2 -translate-y-1/2 z-20 cursor-help shadow-sm transition-transform hover:scale-150';
                    diamond.style.left = `${leftPos}px`;
                    diamond.style.top = `${topPos}px`;

                    if (event.tooltip && event.tooltip[stateName]) {
                        const tip = document.createElement('div');
                        tip.className = 'tooltip-box absolute bottom-6 left-1/2 -translate-x-1/2 bg-[#2c1810] text-[#fdfbf7] text-xs p-2 rounded w-[150px] -rotate-45 pointer-events-none z-50 shadow-xl';
                        tip.innerText = event.tooltip[stateName];
                        diamond.appendChild(tip);
                    }
                    elements.eventsContainer.appendChild(diamond);
                });
            }
        });
    }


    // --- MATH HELPERS ---

    function dateToPixel(dateString) {
        const date = new Date(dateString);
        const totalTime = CONFIG.END_DATE - CONFIG.START_DATE;
        const eventTime = date - CONFIG.START_DATE;
        const percentage = eventTime / totalTime;
        return percentage * CONFIG.TOTAL_WIDTH;
    }

    function pixelToDate(pixel) {
        const percentage = pixel / CONFIG.TOTAL_WIDTH;
        const totalTime = CONFIG.END_DATE - CONFIG.START_DATE;
        const timeElapsed = totalTime * percentage;
        const newDate = new Date(CONFIG.START_DATE.getTime() + timeElapsed);
        return newDate.getFullYear(); // Just returning year for display
    }

    // --- THE GAME LOOP (RequestAnimationFrame) ---

    function updateLoop() {
        // 1. Get the visual center of the screen (Where the red line is)
        const screenCenter = window.innerWidth / 2;

        // Update Date Display based on scroll math (this is approximation for the label only)
        const scrollLeft = elements.timelineViewport.scrollLeft;
        elements.dateDisplay.innerText = pixelToDate(scrollLeft);

        // 2. Find Active Event using VISUAL POSITION
        let foundEvent = null;

        // Narrower threshold for snappier feel
        const VISUAL_THRESHOLD = 50;

        eventsData.forEach(event => {
            if (!event.domElement) return;

            // Get the line's position relative to the viewport window
            const rect = event.domElement.getBoundingClientRect();

            // Calculate distance: (Line's Left Position) minus (Screen Center)
            const dist = Math.abs(rect.left - screenCenter);

            if (dist < VISUAL_THRESHOLD) {
                foundEvent = event;
            }
        });

        if (foundEvent && foundEvent.id !== activeEventId) {
            activateEvent(foundEvent);
        } else if (!foundEvent && activeEventId !== null) {
            // Only deactivate if we moved far enough away from the current event
            // This prevents flickering if you are just 1 pixel outside the threshold
            deactivateEvent();
        }

        requestAnimationFrame(updateLoop);
    }

    // --- INTERACTION LOGIC ---

    function activateEvent(event) {
        activeEventId = event.id;

        // 1. Update Card Content
        elements.cardTitle.innerText = event.title;
        elements.cardDate.innerText = formatFriendlyDate(event.date);
        elements.cardDesc.innerText = event.description;

        // Handle Image Types
        if (event.type === 'medium' || event.type === 'large') {
            elements.cardImg.src = event.image;
            elements.cardImgContainer.classList.remove('hidden');
        } else {
            elements.cardImgContainer.classList.add('hidden');
        }

        // Show Card (Slide Up)
        elements.infoCard.classList.remove('translate-y-[120%]');

        // 2. Handle "Matrix" Lines (Row Highlighting)
        // Clear previous
        document.querySelectorAll('.state-row, .timeline-row-line').forEach(el => el.classList.remove('active'));

        if (event.involved.includes("All")) {
            // "Union" Mode - Don't highlight rows, trigger cinematic BG
            if (event.type === 'large' && event.bgImage) {
                elements.cinematicBg.style.backgroundImage = `url('${event.bgImage}')`;
                elements.cinematicBg.classList.remove('opacity-0');
                elements.sidebar.classList.add('opacity-50'); // Dim UI
                elements.gridLines.classList.add('blur-mode'); // Blur lines
            }
        } else {
            // Specific States Mode
            event.involved.forEach(stateName => {
                // Highlight Sidebar Row
                const sidebarRow = document.querySelector(`.state-row[data-state="${stateName}"]`);
                if (sidebarRow) sidebarRow.classList.add('active');

                // Highlight Grid Line
                const gridRow = document.querySelector(`.timeline-row-line[data-state-row="${stateName}"]`);
                if (gridRow) gridRow.classList.add('active');
            });
        }
    }

    function deactivateEvent() {
        activeEventId = null;

        // Hide Card
        elements.infoCard.classList.add('translate-y-[120%]');

        // Reset Rows
        document.querySelectorAll('.state-row, .timeline-row-line').forEach(el => el.classList.remove('active'));

        // Reset Cinematic Mode
        elements.cinematicBg.classList.add('opacity-0');
        elements.sidebar.classList.remove('opacity-50');
        elements.gridLines.classList.remove('blur-mode');
    }

    function formatFriendlyDate(dateString) {
        // 1. Parse the date ensuring no timezone offsets shift the day
        const [year, month, day] = dateString.split('-');
        const date = new Date(year, month - 1, day);

        // 2. Get Month Name
        const monthName = date.toLocaleString('default', { month: 'long' });

        // 3. Get Day and determine Suffix (st, nd, rd, th)
        const d = parseInt(day);
        let suffix = 'th';

        if (d > 3 && d < 21) {
            suffix = 'th'; // Covers 4-20 (11th, 12th, 13th)
        } else {
            switch (d % 10) {
                case 1:  suffix = "st"; break;
                case 2:  suffix = "nd"; break;
                case 3:  suffix = "rd"; break;
            }
        }

        return `${monthName} ${d}${suffix}, ${year}`;
    }

    // Start
    init();
</script>




</body></html>